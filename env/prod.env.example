ENV=production

# Domains + proxy
APP_DOMAIN=app.example.com
API_DOMAIN=api.example.com
CADDY_EMAIL=ops@example.com

# Frontend public (bundled into client)
APP_URL=https://app.example.com
NEXT_PUBLIC_API_BASE_URL=https://api.example.com
NEXT_PUBLIC_TELEGRAM_BOT_USERNAME=your_bot_username

# Database / Redis
POSTGRES_DB=pmd
POSTGRES_USER=postgres
POSTGRES_PASSWORD=change-me
DATABASE_URL=postgresql+psycopg://postgres:change-me@postgres:5432/pmd
REDIS_URL=redis://redis:6379/0

# CORS
CORS_ALLOW_ORIGINS=https://app.example.com

# App/session
SESSION_SECRET=change-me
SESSION_COOKIE_NAME=pmd_session
SESSION_TTL_DAYS=14

# Stripe (server-only)
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_BASIC_PRICE_ID=
STRIPE_PRO_PRICE_ID=
STRIPE_ELITE_PRICE_ID=

# Polymarket adapter (server-only)
POLYMARKET_BASE_URL=https://<fill-me>
POLY_PAGE_LIMIT=100
POLY_MAX_EVENTS=None
POLY_MAX_PAGES=100
POLY_START_OFFSET=0
POLY_ORDER=
POLY_ASCENDING=
POLY_USE_SERVER_FILTERS=true
POLY_LIQUIDITY_MIN=None
POLY_VOLUME_MIN=None
POLY_USE_GLOBAL_MINIMUMS=true
POLY_TIMEOUT_SECONDS=12
POLY_CONNECT_TIMEOUT_SECONDS=5
POLY_MAX_RETRIES=2
POLY_RETRY_BACKOFF_SECONDS=0.5
POLY_CIRCUIT_MAX_FAILURES=5
POLY_CIRCUIT_RESET_SECONDS=60

# Ingest / cleanup
INGEST_INTERVAL_SECONDS=300
CLEANUP_ENABLED=true
CLEANUP_SCHEDULE_HOUR_UTC=3
SNAPSHOT_RETENTION_DAYS=7
ALERT_RETENTION_DAYS=30
DELIVERY_RETENTION_DAYS=30
FAST_SIGNALS_GLOBAL_ENABLED=false

# Telegram (server-only)
TELEGRAM_BOT_TOKEN=
TELEGRAM_TIMEOUT_SECONDS=10
TELEGRAM_CONNECT_TIMEOUT_SECONDS=5
TELEGRAM_MAX_RETRIES=2
TELEGRAM_RETRY_BACKOFF_SECONDS=0.5
TELEGRAM_CIRCUIT_MAX_FAILURES=5
TELEGRAM_CIRCUIT_RESET_SECONDS=60

# Admin (server-only)
ADMIN_API_KEY=

# LLM (server-only, read-only)
OPENAI_API_KEY=
LLM_API_BASE=https://api.openai.com/v1/chat/completions
LLM_MODEL=gpt-4o-mini
LLM_TIMEOUT_SECONDS=15
LLM_CONNECT_TIMEOUT_SECONDS=5
LLM_MAX_RETRIES=2
LLM_RETRY_BACKOFF_SECONDS=0.5
LLM_CACHE_TTL_SECONDS=3600
LLM_CIRCUIT_MAX_FAILURES=5
LLM_CIRCUIT_RESET_SECONDS=60

# Auth + rate limit
DEFAULT_TENANT_ID=default
RATE_LIMIT_DEFAULT_PER_MIN=60
RATE_LIMIT_WINDOW_SECONDS=60
RATE_LIMIT_ALERTS_PER_MIN=60
RATE_LIMIT_COPILOT_PER_MIN=30
RATE_LIMIT_ME_PER_MIN=60
RATE_LIMIT_WRITE_PER_MIN=20
RATE_LIMIT_AUTH_PER_MIN=20
RATE_LIMIT_IP_PER_MIN=120
EXTERNAL_MAX_CONCURRENT_POLY_CALLS=4
EXTERNAL_MAX_CONCURRENT_LLM_CALLS=4
EXTERNAL_MAX_CONCURRENT_TELEGRAM_CALLS=4

# Cache
CACHE_ENABLED=true
CACHE_STALE_GRACE_SECONDS=30
CACHE_TTL_ALERTS_LATEST_SECONDS=20
CACHE_TTL_ALERT_HISTORY_SECONDS=300
CACHE_TTL_ALERT_SUMMARY_SECONDS=30
CACHE_TTL_ALERT_LAST_DIGEST_SECONDS=30
CACHE_TTL_COPILOT_FEED_SECONDS=30
CACHE_TTL_COPILOT_RUNS_SECONDS=15
CACHE_TTL_ME_SECONDS=20
CACHE_TTL_SETTINGS_SECONDS=60
CACHE_TTL_ENTITLEMENTS_SECONDS=60
CACHE_TTL_SNAPSHOTS_LATEST_SECONDS=15
CACHE_TTL_STATUS_SECONDS=15

# Database
DB_STATEMENT_TIMEOUT_SECONDS=10

# Logging
LOG_LEVEL=INFO
LOG_JSON=true
HTTPX_SLOW_REQUEST_THRESHOLD_SECONDS=2.0